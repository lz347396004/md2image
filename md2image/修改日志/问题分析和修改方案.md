# MD2Image 问题分析和修改方案

## 问题排查结果

### 1. 背景设置参数与实际渲染不符
**问题分析：**
- 在 `MarkdownPoster.vue` 的 `generateImage` 函数中，背景处理逻辑存在问题
- 纯色背景可能被错误识别或处理为几何图形
- `getBackgroundStyle` 函数需要优化背景类型判断逻辑

**根本原因：**
- 背景图片类型判断逻辑不够精确
- 预设背景中包含复杂的 CSS 渐变，可能影响纯色背景的正确应用

### 2. 字体大小和行高效果不明显
**问题分析：**
- `applyCustomCSS` 函数中的 CSS 应用逻辑正常
- 问题可能在于 CSS 选择器优先级或样式覆盖
- 字体大小和行高的变化幅度可能不够明显

**根本原因：**
- CSS 选择器可能被其他样式覆盖
- 字体大小和行高的数值范围需要调整
- 需要使用 `!important` 或更具体的选择器确保样式生效

### 3. AI提示词和CSS输入框显示问题
**问题分析：**
- 通过代码检查发现，所有输入框都正确使用了 `v-model` 绑定
- `localSettings` 对象结构完整，包含所有必要的配置项
- 问题可能在于初始化时 `localSettings` 没有正确同步 `props.settings`

**根本原因：**
- 初始化逻辑可能存在时序问题
- 需要确保 `watch` 监听器正确触发并更新本地设置

### 4. 样式设置面板布局问题
**问题分析：**
- 当前样式设置在独立的设置对话框中
- 需要将常用样式控制移到主界面，与生成按钮并列

### 5. 缺少预设CSS样式方案
**问题分析：**
- 当前只有基础的字体、颜色等设置
- 缺少完整的预设样式方案供用户快速选择

## 整体修改方案 List

### 方案1：修复背景渲染问题
**优先级：高**
- 优化 `getBackgroundStyle` 函数的背景类型判断逻辑
- 确保纯色背景正确应用，不被误判为几何图形
- 修复 `generateImage` 函数中的背景处理逻辑

### 方案2：增强字体和行高效果
**优先级：高**
- 调整字体大小和行高的数值范围，使变化更明显
- 优化 CSS 选择器，使用更具体的选择器或 `!important`
- 确保样式变化立即可见

### 方案3：修复输入框显示问题
**优先级：高**
- 优化 `localSettings` 的初始化逻辑
- 确保所有配置项正确显示当前值
- 修复可能的时序问题

### 方案4：重构UI布局 - 创建快速样式面板
**优先级：中**
- 在主界面创建快速样式控制面板
- 将常用样式设置移到生成图片按钮旁边
- 保持设置对话框用于高级配置

### 方案5：添加预设CSS样式方案
**优先级：中**
- 设计多个美观的预设样式方案
- 创建样式方案选择器
- 实现一键应用预设样式功能

### 方案6：创建修改日志系统
**优先级：低**
- 建立文档记录系统
- 记录每次修改的详细信息

## 实施计划

1. **第一阶段**：修复核心功能问题（方案1-3）
2. **第二阶段**：优化用户体验（方案4-5）
3. **第三阶段**：完善文档系统（方案6）

## 预期效果

- 背景设置与实际渲染完全一致
- 字体和行高调整效果明显可见
- 所有输入框正确显示当前配置
- 用户可以快速调整常用样式
- 提供多种美观的预设样式方案
- 建立完整的修改记录系统