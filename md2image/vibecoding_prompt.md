项目启动提示词 V3.0：AI 驱动的 Markdown 可视化图文生成器

文档版本: 3.0 | 日期: 2025-09-14

### **1.0 [角色与目标 (Role & Objective)]**

你是一名资深的全栈开发工程师，你的任务是基于一个现代化的、前后端分离的技术栈，独立构建一个名为“AI Markdown 可视化图文生成器”的 Web 应用。该应用的核心目标是将用户输入的 Markdown 文本，通过 AI 增强和一套**具有强烈、专业风格的 UI 系统**进行渲染，最终生成适合社交媒体传播的高清图片。

### **2.0 [核心背景与架构理念 (Core Context & Architecture)]**

* **架构模式**: 必须采用前后端分离架构。前端为纯粹的单页应用 (SPA)，后端为无状态 (Stateless) 的 API 服务。

* **核心原则**: 客户端优先。所有实时、高频的交互（如文本编辑、Markdown 预览）必须在客户端完成以保证极致体验。后端仅作为按需调用的、计算密集型的“AI 处理器”。

* **开发效率**: 优先使用成熟、强大的开源库来构建，避免重复造轮子，目标是快速迭代出一个可用的产品。

### **3.0 [视觉与设计系统约束 (Visual & Design System Constraints)]**

#### **3.1 设计哲学 (Design Philosophy)**

* **核心参考基准**: 网站 **`rawlab.co`** 是本项目的**唯一且核心**的视觉风格和设计精神参考。必须深入分析并复现其设计语言的精髓。

* **排版即图像**: 将排版作为核心视觉元素。使用巨大、充满个性的标题来构建画面的结构和冲击力。

* **自信的极简主义**: 摒弃所有不必要的装饰。美感完全通过黑白对比、空间关系和字体本身的形态来表达。

* **结构化与非对称**: 所有元素都应遵循一个隐藏的、严格的网格系统，但在这个系统内进行非对称的布局，以创造视觉张力与动态平衡。

#### **3.2 布局与色彩 (Layout & Color)**

* **布局**: 单栏内容流，主要阅读内容区设定最大宽度 `max-w-3xl`。必须使用大面积的留白作为核心设计元素。

* **色彩系统**: 严格的单色系统。
  
  * **亮色模式**: 背景为米白色 (`#F7F7F7`)，文字/前景为炭黑色 (`#2D2D2D`)。
  
  * **暗色模式**: 背景为炭黑色 (`#2D2D2D`)，文字/前景为柔和灰白色 (`#E8E8E6`)。
  
  * **无彩色强调色**: 交互元素的视觉反馈应通过**形态变化、动画或黑白反转**来实现。

#### **3.3 排版系统 (Typography System)**

* **字体二元性 (Font Duality)**: 这是设计的核心，必须严格执行。
  
  * **H1/H2 大标题**: 必须使用一款笔画粗细对比强烈的**展示型衬线字体 (Display Serif)**。推荐：`Playfair Display`, `Butler`。
  
  * **H3-H6/正文/UI**: 必须使用一款干净、中性的**无衬线字体 (Sans-serif)**。推荐：`Inter`。

* **极端字号层级**: 创造巨大的视觉反差。H1/H2 字号应非常巨大，正文（`p`）则保持在 `17px` 左右的舒适阅读尺寸。

#### **3.4 组件与细节 (Components & Details)**

* **风格**: 保持硬朗、直角或极小的圆角。摒弃大圆角和过多的阴影。

* **按钮**: `hover` 状态必须实现**字母逐字向上翻滚**的动画效果。

* **背景质感**: 需在整个页面背景上叠加一层极其细微的**噪点/颗粒 (Noise)** 纹理。

* **分页组件**: 需设计清晰的“上一页/下一页”导航箭头，以及表示当前页码和总页数的分页器（例如，底部的小圆点）。

### **4.0 [技术栈约束 (Tech Stack Constraints)]**

* **前端**:
  
  * **框架**: Vue 3 (使用组合式 API)
  
  * **构建工具**: Vite
  
  * **样式**: Tailwind CSS
  
  * **编辑器**: CodeMirror 6
  
  * **Markdown 解析**: `markdown-it`
  
  * **图片生成**: `html2canvas`
  
  * **分页组件 (可选)**: Swiper.js

* **后端**:
  
  * **语言/框架**: Python 3.10+ & FastAPI
  
  * **AI 库**: `openai`, `httpx` (用于异步 API 调用)

### **5.0 [功能性需求 (Functional Requirements)]**

* **内容分页**:
  
  * **标记**: 使用 Markdown 的水平分割线 `---` 作为物理分页符。
  
  * **预览**: 前端预览界面需将分割后的内容呈现在一个**轮播/幻灯片 (Carousel)** 组件中，支持用户分页浏览。

* **图片导出配置**:
  
  * **选项**: 提供导出图片的清晰度选项：`标清 (1x)`、`高清 (2x)` (默认)、`超清 (3x)`。
  
  * **实现**: 该选项直接控制 `html2canvas` 的 `scale` 参数。

### **6.0 [输入 (System Inputs)]**

1. **原始数据**: 用户在 CodeMirror 编辑器中输入的 Markdown 文本。

2. **配置参数**:
   
   * a. 用户选择的样式主题 (`light`/`dark`)。
   
   * b. 用户选择的图片清晰度 (`1`, `2`, `3`)。
   
   * c. 风格提示词（可选项，用于未来扩展）。

3. **执行指令**: 用户通过点击 UI 按钮触发的明确意图 (`ENHANCE` 或 `GENERATE`)。

### **7.0 [处理流程 (Required Process Flow)]**

1. **实时预览 (纯客户端)**:
   
   * 监听编辑器内容变化。
   
   * **预处理**: 检测 `---` 分页符，将 Markdown 文本分割成页面数组。
   
   * 通过 `markdown-it` 将每个页面的 Markdown 实时解析为 HTML。
   
   * 将生成的 HTML 渲染到分页组件的对应幻灯片中，并应用 Tailwind CSS 样式。此过程不得有任何后端 API 调用。

2. **AI 增强 (客户端 → 后端 → 客户端)**:
   
   * 当用户触发 `ENHANCE` 指令时，前端将当前的 Markdown 文本和任务类型（如 `segment_text`）打包成 JSON。
   
   * 异步 `POST` 请求到后端的 `/api/v1/enhance` 端点。
   
   * FastAPI 后端接收请求，调用相应的 Python AI 处理脚本。
   
   * 后端处理完成后，**必须<u>返回增强后的新 Markdown 文本</u>**，而非 HTML。
   
   * 前端接收到新文本后，更新 CodeMirror 编辑器的内容，从而自动触发第 1 步的实时预览。

3. **图片生成 (纯客户端)**:
   
   * 当用户触发 `GENERATE` 指令时，前端调用 `html2canvas`。
   
   * 目标元素为**当前可见的**预览面板幻灯片 DOM 节点。
   
   * 根据用户选择的清晰度设置 `scale` 参数。
   
   * 将生成的 Canvas 转换为图片数据，并触发浏览器下载。

### **8.0 [输出 (System Outputs)]**

1. **主要产出**: 一个高分辨率的 `.png` 或 `.jpeg` 图片文件。对于分页内容，默认导出当前预览页，或提供导出所有页面为多张图片的选项。

2. **次要产出**: 经过 AI 增强后的 Markdown 源代码。

### **9.0 [关键接口定义 (Key API Definition)]**

* **Endpoint**: `POST /api/v1/enhance`

* **Request Body (JSON)**:
  
      {
        "markdown_text": "string",
        "task": "auto_image" | "beautify_table" | "segment_text",
        "style_prompt": "string | null" 
      }

* **Response Body (JSON)**:
  
      {
        "enhanced_markdown_text": "string"
      }
